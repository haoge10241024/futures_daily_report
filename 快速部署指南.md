# 快速部署指南

## 🚀 5分钟部署到Streamlit Cloud

### 📋 前置准备

- ✅ GitHub账号
- ✅ Git已安装
- ✅ Python 3.9+ 环境（本地测试用）

---

## 步骤1：整理文件（2分钟）

### 自动整理（推荐）

**Windows PowerShell：**
```powershell
cd "D:\Cursor\cursor项目\TradingAgent\期货日报"
.\整理文件_准备部署.ps1
```

选择方案：
- **方案A（推荐）** - 简洁版，仅保留核心文件
- **方案B** - 完整版，保留所有文档

### 手动整理

查看详细说明：[GitHub部署准备说明.md](GitHub部署准备说明.md)

---

## 步骤2：本地测试（1分钟）

### 检查程序是否正常运行

```bash
# 安装依赖
pip install -r requirements.txt

# 启动程序
streamlit run 期货日报_AI增强专业版.py
```

**测试：**
1. 在左侧边栏输入API密钥
2. 检查配置状态是否显示"✅ 已配置"
3. 测试基本功能（不需要生成完整报告）

如果正常，按 `Ctrl+C` 停止程序。

---

## 步骤3：推送到GitHub（1分钟）

### 初始化Git仓库

```bash
# 1. 进入项目目录
cd "D:\Cursor\cursor项目\TradingAgent\期货日报"

# 2. 初始化Git（如果还没有）
git init

# 3. 添加所有文件
git add .

# 4. 查看将要提交的文件（重要！）
git status
```

**安全检查：**
- ❌ 确认没有 `.env` 文件
- ❌ 确认没有 `.bat` 文件
- ❌ 确认没有 `archive/` 文件夹
- ✅ 应该看到 `.gitignore`、`README.md`、`requirements.txt`、`期货日报_AI增强专业版.py`

### 提交代码

```bash
# 5. 提交到本地仓库
git commit -m "Initial commit: 期货日报生成器 v4.1"
```

### 创建GitHub仓库并推送

**在GitHub网站上：**
1. 访问 https://github.com/new
2. Repository name: `futures-daily-report`（或您喜欢的名字）
3. Description: `专业的期货日报自动生成系统（AI赋能版）`
4. 选择 **Public**（必须公开才能免费部署）
5. **不要** 选择"Add a README file"（已有README）
6. 点击 "Create repository"

**在命令行中：**
```bash
# 6. 添加远程仓库（替换为您的GitHub用户名）
git remote add origin https://github.com/您的用户名/futures-daily-report.git

# 7. 推送代码
git branch -M main
git push -u origin main
```

如果提示输入用户名和密码，使用GitHub的 Personal Access Token（不是密码）。

---

## 步骤4：部署到Streamlit Cloud（1分钟）

### 4.1 访问Streamlit Cloud

访问：https://streamlit.io/cloud

点击 **"Sign in with GitHub"**

### 4.2 创建新应用

1. 点击右上角的 **"New app"** 按钮

2. 填写部署信息：
   - **Repository:** 选择 `您的用户名/futures-daily-report`
   - **Branch:** `main`
   - **Main file path:** `期货日报_AI增强专业版.py`
   - **App URL (optional):** 自定义域名（可选）

3. 点击 **"Deploy!"**

### 4.3 等待部署

部署通常需要 **3-5分钟**。您会看到：
- 📦 Installing Python packages...
- 🚀 Starting app...
- ✅ Your app is live!

### 4.4 获取应用链接

部署成功后，您会得到一个访问链接：

```
https://您的用户名-futures-daily-report-xxx.streamlit.app
```

---

## 步骤5：测试在线应用（可选）

### 5.1 访问应用

打开部署成功后的链接。

### 5.2 配置API密钥

在左侧边栏输入：
- **DeepSeek API Key:** 您的密钥
- **Serper API Key:** 您的密钥

### 5.3 测试功能

1. 输入品种名称：如"铜"
2. 输入合约代码：如"CU2501"
3. 选择日期
4. 点击"生成K线图"
5. 测试AI生成功能

---

## ✅ 部署完成！

### 🎉 恭喜！您的应用已成功部署

**分享您的应用：**
```
https://您的用户名-futures-daily-report-xxx.streamlit.app
```

**告诉用户：**
1. 访问上面的链接
2. 在左侧边栏输入自己的API密钥
3. 开始使用期货日报生成器

---

## 🔄 更新应用

### 本地修改代码后，推送到GitHub

```bash
# 1. 修改代码
# 2. 提交更改
git add .
git commit -m "更新说明"
git push

# 3. Streamlit Cloud会自动检测并重新部署（约2-3分钟）
```

---

## ❓ 常见问题

### Q1: 部署失败，显示 "Module not found"

**解决方法：**
1. 检查 `requirements.txt` 是否包含所有依赖
2. 在本地运行 `pip install -r requirements.txt` 测试
3. 确保依赖包名称和版本号正确

### Q2: 部署成功但应用无法访问

**解决方法：**
1. 在Streamlit Cloud dashboard查看日志
2. 检查是否有运行时错误
3. 确保 `期货日报_AI增强专业版.py` 文件名正确

### Q3: 应用很慢或经常休眠

**原因：** Streamlit Cloud免费版的限制
- 如果7天无人访问，应用会休眠
- 资源限制：1 GB内存，1 CPU

**解决方法：**
- 定期访问保持活跃
- 或升级到Streamlit Teams

### Q4: 如何限制访问？

**免费版：** 不支持访问限制

**解决方案：**
1. 升级到Streamlit Teams（支持密码保护）
2. 或在代码中添加简单的密码验证

### Q5: 用户的API密钥安全吗？

**是的！** API密钥：
- ✅ 仅存储在用户的浏览器会话中
- ✅ 不会保存到服务器
- ✅ 关闭浏览器后需要重新输入
- ✅ 每个用户独立，互不影响

---

## 📚 详细文档

需要更多帮助？查看：

- 📖 [README.md](README.md) - 项目总览
- 🚀 [Streamlit部署指南.md](Streamlit部署指南.md) - 详细部署教程
- 🔧 [API配置说明.md](API配置说明.md) - API配置指南
- 📁 [GitHub部署准备说明.md](GitHub部署准备说明.md) - 文件整理说明

---

## 📞 技术支持

遇到问题？联系我们：

- **邮箱：** 953534947@qq.com
- **作者：** 7haoge

---

## 🎯 快速参考

### 本地开发

```bash
streamlit run 期货日报_AI增强专业版.py
```

### Git命令

```bash
git status          # 查看状态
git add .           # 添加所有文件
git commit -m "xxx" # 提交
git push            # 推送到GitHub
```

### Streamlit Cloud

- 登录：https://streamlit.io/cloud
- 文档：https://docs.streamlit.io/streamlit-community-cloud

---

**祝您部署顺利！🚀**

---

**更新日期：** 2025-10-13  
**版本：** v4.1（快速部署指南）

